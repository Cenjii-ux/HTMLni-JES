<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Jes‚Äô Phone Shop üì± ‚Äî 4 OOP Concepts</title>
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: #f3f4f6;
    color: #222;
    margin: 0;
    padding: 20px;
  }

  h1 {
    text-align: center;
    color: #1f2937;
  }

  .product-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
    gap: 20px;
    margin-top: 30px;
  }

  .product-card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 3px 10px rgba(0,0,0,0.1);
    text-align: center;
    padding: 15px;
    transition: 0.3s;
  }

  .product-card:hover {
    transform: scale(1.05);
  }

  .product-card img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-radius: 8px;
  }

  .product-card h3 {
    margin: 10px 0 5px;
  }

  .product-card p {
    margin: 0;
    color: #555;
  }

  .product-card button {
    margin: 5px;
    padding: 8px 14px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    transition: 0.3s;
  }

  .quick-view {
    background: #3b82f6;
    color: white;
  }

  .add-to-cart {
    background: #10b981;
    color: white;
  }

  .quick-view:hover { background: #2563eb; }
  .add-to-cart:hover { background: #059669; }

  table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 30px;
    background: white;
    border-radius: 10px;
    overflow: hidden;
  }

  th, td {
    padding: 10px;
    text-align: center;
    border-bottom: 1px solid #ddd;
  }

  th {
    background: #e5e7eb;
  }

  td img {
    width: 60px;
    height: 60px;
    object-fit: cover;
    border-radius: 8px;
  }

  #checkout-btn {
    background: #f59e0b;
    color: white;
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    margin-top: 15px;
    cursor: pointer;
    transition: 0.3s;
  }

  #checkout-btn:hover {
    background: #d97706;
  }

  h3#total {
    text-align: right;
    margin-top: 10px;
    color: #111827;
  }
</style>
</head>
<body>
<h1>Jes‚Äô Phone Shop üì± ‚Äî 4 OOP Concepts</h1>

<!--  Product Display Section -->
<div id="productContainer" class="product-container"></div>

<!--Cart Section -->
<h2>Your Cart</h2>
<table class="cart-table">
  <thead>
    <tr>
      <th>Image</th>
      <th>Product</th>
      <th>Price</th>
      <th>Qty</th>
      <th>Subtotal</th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody id="cart-body"></tbody>
</table>

<h3 id="total">Total: $0.00</h3>
<button id="checkout-btn">Checkout</button>

<script>
/*  1. ENCAPSULATION 
   Encapsulation means bundling data and methods inside a single unit (class).
   The 'Product' class below keeps product info (name, price, image, link)
   safely organized inside one object. */
class Product {
  constructor(name, price, image, link) {
    this.name = name;   // product name
    this.price = price; // product price
    this.image = image; // image URL
    this.link = link;   // product link
  }

  // Method that returns details of the product (used in Polymorphism)
  getDetails() {
    return `${this.name} - $${this.price.toFixed(2)}`;
  }
}

/* ----------------------------- 2. INHERITANCE -----------------------------
   The 'DiscountedProduct' class inherits from 'Product'.
   It gets all the properties and methods of Product but adds new ones
   (like 'discountRate' and a new way to calculate discounted prices).
--------------------------------------------------------------------------- */
class DiscountedProduct extends Product {
  constructor(name, price, image, link, discountRate) {
    super(name, price, image, link); // reuses constructor of Product
    this.discountRate = discountRate; // additional feature: discount %
  }

  // --------------------------- 3. POLYMORPHISM ---------------------------
  // Polymorphism allows us to use the same method name (getDetails)
  // but behave differently in subclasses.
  getDetails() {
    const discounted = this.price * (1 - this.discountRate);
    return `${this.name} (Discounted ${this.discountRate * 100}%): $${discounted.toFixed(2)}`;
  }
}

/* ------------------------------- 4. ABSTRACTION ---------------------------
   Abstraction hides complex logic behind simple functions.
   Users just call renderProducts() or renderCart() without worrying
   about how the logic works internally.
--------------------------------------------------------------------------- */

// Product list (mix of normal and discounted products)
const products = [
  new Product("iPhone 15 Pro", 1199, "https://store.storeimages.cdn-apple.com/4982/as-images.apple.com/is/iphone-15-pro-model-unselect-gallery-1-202309?wid=5120&hei=2880&fmt=jpeg&qlt=90&.v=1693001523024", "https://www.apple.com/iphone/"),
  new DiscountedProduct("Google Pixel 9 Pro", 999, "https://i.guim.co.uk/img/media/2f6082f5edb313aa955a3df84e140f9854b4274e/84_124_5168_3100/master/5168.jpg?width=1200&height=900&quality=85&auto=format&fit=crop&s=32695a12c90e0cf21712e2ffafa24c39", "https://store.google.com/product/pixel_9_pro?hl=en-US", 0.10),
  new Product("OnePlus 12", 699, "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcToCmSXUHVYyzbR-C5AZMNMfyEKUA2QWzu2bA&s", "https://www.oneplus.com/us/oneplus-12"),
  new DiscountedProduct("ASUS ROG Phone 8", 1099, "https://fdn2.gsmarena.com/vv/bigpic/asus-rog-phone-8-pro.jpg", "https://rog.asus.com/phones/rog-phone-8/", 0.15)
];

const container = document.getElementById("productContainer");
const cart = [];

function renderProducts() {
  container.innerHTML = "";
  products.forEach((p) => {
    const card = document.createElement("div");
    card.classList.add("product-card");

    // Notice we use polymorphism: p.getDetails() behaves differently
    // for DiscountedProduct vs normal Product.
    card.innerHTML = `
      <img src="${p.image}" alt="${p.name}">
      <h3>${p.name}</h3>
      <p>${p.getDetails()}</p>
      <button class="quick-view">Quick View</button>
      <button class="add-to-cart">Add to Cart</button>
    `;
    card.querySelector(".quick-view").addEventListener("click", () => {
      window.open(p.link, "_blank");
    });
    card.querySelector(".add-to-cart").addEventListener("click", () => addToCart(p));
    container.appendChild(card);
  });
}

function addToCart(product) {
  const existing = cart.find(item => item.name === product.name);
  if (existing) {
    existing.qty++;
  } else {
    cart.push({ ...product, qty: 1 });
  }
  renderCart();
}

function renderCart() {
  const tbody = document.getElementById("cart-body");
  tbody.innerHTML = "";
  let total = 0;

  cart.forEach((item, index) => {
    // If product is discounted, apply discount automatically
    const price = item.discountRate ? item.price * (1 - item.discountRate) : item.price;
    const subtotal = price * item.qty;
    total += subtotal;

    const row = document.createElement("tr");
    row.innerHTML = `
      <td><img src="${item.image}" alt="${item.name}"></td>
      <td>${item.name}</td>
      <td>$${price.toFixed(2)}</td>
      <td>
        <button onclick="changeQty(${index}, -1)">‚àí</button>
        ${item.qty}
        <button onclick="changeQty(${index}, 1)">+</button>
      </td>
      <td>$${subtotal.toFixed(2)}</td>
      <td><button onclick="removeItem(${index})">‚ùå</button></td>
    `;
    tbody.appendChild(row);
  });

  document.getElementById("total").textContent = `Total: $${total.toFixed(2)}`;
}

function changeQty(index, delta) {
  cart[index].qty += delta;
  if (cart[index].qty <= 0) cart.splice(index, 1);
  renderCart();
}

function removeItem(index) {
  cart.splice(index, 1);
  renderCart();
}

document.getElementById("checkout-btn").addEventListener("click", () => {
  if (cart.length === 0) {
    alert("Your cart is empty!");
  } else {
    alert("Thank you for shopping with Jes‚Äô Phone Shop!");
    cart.length = 0;
    renderCart();
  }
});

// Start app
renderProducts();
</script>
</body>
</html>
